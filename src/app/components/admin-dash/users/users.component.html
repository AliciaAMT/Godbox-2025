<app-back-button></app-back-button>

<ion-content class="ion-text-center">
  <h2>Users</h2>

  <!-- Loading State -->
  <div *ngIf="isLoading" style="padding: 20px;">
    <p>Loading users...</p>
  </div>

  <!-- Users List -->
  <ion-grid *ngIf="!isLoading">
    <ion-row>
      <ion-col sizeSm="4" offsetSm="4">
        <!-- Search Bar -->
        <ion-searchbar
          [(ngModel)]="searchTerm"
          (ionInput)="onSearchChange($event)"
          placeholder="Search by email..."
          showClearButton="focus"
          (ionClear)="clearSearch()"
          style="margin-bottom: 20px;">
        </ion-searchbar>

        <!-- Users List -->
        <ion-list>
          <ion-item *ngFor="let user of filteredUsers" [routerLink]="['/admin-dash/users/view-user', user.id]" router-direction="forward">
            <ion-label>
              <h2>{{user.userName || 'No Name'}}</h2>
              <p>{{user.email || 'No Email'}}</p>
              <p><small>Role: {{getRoleDisplayName(user.userRole)}}</small></p>
            </ion-label>
          </ion-item>
        </ion-list>

        <!-- No Users Message -->
        <div *ngIf="filteredUsers.length === 0 && users.length > 0" style="padding: 20px; color: #888;">
          <p>No users found matching "{{searchTerm}}".</p>
          <ion-button fill="outline" size="small" (click)="clearSearch()">
            Clear Search
          </ion-button>
        </div>

        <!-- No Users Message -->
        <div *ngIf="users.length === 0" style="padding: 20px; color: #888;">
          <p>No users found.</p>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
